////  RSTableViewCell.m//  RenrenSixin////  Created by feng zijie on 12-4-9.//  Copyright (c) 2012å¹´ renren. All rights reserved.//#import "RSTableViewCell.h"#import "RSTableViewItem.h"@implementation RSTableViewCell@synthesize object = _object;@synthesize indexPath;@synthesize userInteractionBlockSafe = _userInteractionBlockSafe;- (void)dealloc{    [self finishObserveObjectProperty];}- (void)changeSkinStyle:(id)sender{    }+ (CGFloat)tableView:(UITableView *)tableView rowHeightForObject:(id)object {    return 44;}- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)identifier {    if (self = [super initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:identifier]) {        self.backgroundColor = [UIColor clearColor];        self.actionButton = [UIButton buttonWithType:UIButtonTypeCustom];        [self.actionButton addTarget:self action:@selector(actionButtonPressed: withInfo:) forControlEvents:UIControlEventTouchUpInside];                self.userInteractionBlockSafe = NO;    }        return self;}- (void)setObject:(id)object {        if (object != _object) {        if (_object != nil) {            [self finishObserveObjectProperty];        }                _object = object;        if (_object != nil)            [self startObserveObjectProperty];    }}#pragma mark Object Property Observer- (void)startObserveObjectProperty {    }- (void)finishObserveObjectProperty {    }- (void)addObservedProperty:(NSString *)property {    [_object addObserver:self forKeyPath:property                 options:NSKeyValueObservingOptionNew                 context:nil];}- (void)removeObservedProperty:(NSString *)property {    [_object removeObserver:self forKeyPath:property];}- (void)objectPropertyChanged:(NSString *)property {    }- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {    if (object != _object) {        [object removeObserver:self forKeyPath:keyPath];    }    else {        [self objectPropertyChanged:keyPath];    }}- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {    if (self.userInteractionBlockSafe) {        [self detachInteractionBlock];    }    [super touchesEnded:touches withEvent:event];  }- (void)detachInteractionBlock {    self.userInteractionEnabled = NO;    [NSThread detachNewThreadSelector:@selector(cancelInteractionBlock) toTarget:self withObject:nil];}- (void)cancelInteractionBlock {    if (![NSThread isMainThread]) {        [NSThread sleepForTimeInterval:RST_CELL_INTERACTION_BLOCK_DURATION];        self.userInteractionEnabled = YES;    }}- (void)actionButtonPressed:(id)sender withInfo:(NSDictionary*)info{    if ([self.object respondsToSelector:@selector(actionButton:pressedWithInfo:)]) {        [self.object actionButton:sender pressedWithInfo:info];    }}@end